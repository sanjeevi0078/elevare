<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elevare - Mission Control</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
</head>
<body class="overflow-x-hidden">
    <!-- Floating particles -->
    <div class="particle" style="left: 10%; animation-delay: 0s;"></div>
    <div class="particle" style="left: 20%; animation-delay: 2s;"></div>
    <div class="particle" style="left: 30%; animation-delay: 4s;"></div>
    <div class="particle" style="left: 40%; animation-delay: 6s;"></div>
    <div class="particle" style="left: 50%; animation-delay: 8s;"></div>
    <div class="particle" style="left: 60%; animation-delay: 10s;"></div>
    <div class="particle" style="left: 70%; animation-delay: 12s;"></div>
    <div class="particle" style="left: 80%; animation-delay: 14s;"></div>
    <div class="particle" style="left: 90%; animation-delay: 16s;"></div>
    
    <!-- Floating orbs -->
    <div class="floating-orb orb-1"></div>
    <div class="floating-orb orb-2"></div>
    <div class="floating-orb orb-3"></div>

    <header class="fixed w-full top-0 left-0 z-50 glass-morphism">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="/" class="text-3xl font-bold animated-gradient-text">Elevare</a>
            <div class="flex items-center space-x-4">
                <div class="hidden md:flex items-center gap-3">
                    <div class="w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold">
                        AC
                    </div>
                    <div class="text-sm">
                        <div class="text-white font-semibold">Alex Chen</div>
                        <div class="text-purple-300 text-xs">Founder Level 3 üöÄ</div>
                    </div>
                </div>
                <a href="/intake" class="cta-button inline-block text-white font-bold py-2 px-4 rounded-lg">
                    <i class="fas fa-plus mr-2"></i>New Idea
                </a>
                <a href="/" class="text-gray-400 hover:text-white transition-colors">
                    <i class="fas fa-sign-out-alt text-xl"></i>
                </a>
            </div>
        </nav>
    </header>

    <main class="pt-24">
        <!-- Hero Dashboard Section -->
        <section class="py-20 px-4 hero-gradient-enhanced">
            <div class="container mx-auto">
                <!-- Welcome Header -->
                <div class="text-center mb-16">
                    <div class="inline-flex items-center gap-2 bg-gradient-to-r from-green-500/20 to-blue-500/20 border border-green-400/30 rounded-full px-4 py-2 mb-6 animate-float">
                        <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                        <span class="text-sm font-medium text-green-200">üéÜ Mission Control Active</span>
                    </div>
                    <h1 class="text-5xl md:text-6xl font-bold mb-6 animated-gradient-text-hero">
                        MISSION CONTROL
                    </h1>
                    <p class="text-xl text-gray-300 max-w-2xl mx-auto">Your startup empire awaits üöÄ</p>
                </div>

                <!-- Stats Overview -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-16">
                    <div class="stat-card glass-morphism-enhanced text-center">
                        <div class="text-4xl mb-2">üí°</div>
                        <div class="text-3xl font-bold animated-gradient-text-enhanced mb-2">7</div>
                        <div class="text-gray-300 font-semibold">Active Ideas</div>
                    </div>
                    <div class="stat-card glass-morphism-enhanced text-center">
                        <div class="text-4xl mb-2">ü§ù</div>
                        <div class="text-3xl font-bold animated-gradient-text-enhanced mb-2">23</div>
                        <div class="text-gray-300 font-semibold">Cofounder Matches</div>
                    </div>
                    <div class="stat-card glass-morphism-enhanced text-center">
                        <div class="text-4xl mb-2">üèÜ</div>
                        <div class="text-3xl font-bold animated-gradient-text-enhanced mb-2">3</div>
                        <div class="text-gray-300 font-semibold">Founder Level</div>
                    </div>
                    <div class="stat-card glass-morphism-enhanced text-center">
                        <div class="text-4xl mb-2">üî•</div>
                        <div class="text-3xl font-bold animated-gradient-text-enhanced mb-2">12</div>
                        <div class="text-gray-300 font-semibold">Day Streak</div>
                    </div>
                </div>

                <!-- Main Dashboard Grid -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Ideas Section -->
                    <div class="lg:col-span-2">
                        <div class="glass-morphism-enhanced rounded-3xl p-8">
                            <div class="flex items-center justify-between mb-8">
                                <h3 class="text-3xl font-bold animated-gradient-text-enhanced">
                                    üí° Your Ideas
                                </h3>
                                <a href="/intake" class="cta-button-enhanced cta-button-primary">
                                    <i class="fas fa-plus mr-2"></i>Add New
                                </a>
                            </div>
                            
                            <div class="space-y-6" id="ideasSection">
                                <div class="feature-card-enhanced group static-sample">
                                    <div class="flex items-start justify-between">
                                        <div class="flex-1">
                                            <div class="flex items-center gap-3 mb-3">
                                                <div class="text-3xl">üéì</div>
                                                <h4 class="text-xl font-bold text-white group-hover:text-purple-300 transition-colors">AI Learning Companion</h4>
                                                <span class="px-3 py-1 rounded-full text-xs font-semibold bg-green-500/20 text-green-300 border border-green-500/30">LIVE</span>
                                            </div>
                                            <p class="text-gray-300 mb-4">Personalized AI tutor that adapts to individual learning styles and provides real-time feedback.</p>
                                            <div class="flex items-center gap-4 text-sm">
                                                <span class="tag">üéØ EdTech</span>
                                                <span class="text-gray-400">üë• 3 interested cofounders</span>
                                                <span class="text-green-400">üí∞ $2.3M market potential</span>
                                            </div>
                                        </div>
                                        <div class="flex gap-2">
                                            <button class="w-10 h-10 rounded-lg bg-purple-500/20 text-purple-300 border border-purple-500/30 hover:bg-purple-500/30 transition-all">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="w-10 h-10 rounded-lg bg-blue-500/20 text-blue-300 border border-blue-500/30 hover:bg-blue-500/30 transition-all">
                                                <i class="fas fa-share"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="feature-card-enhanced group static-sample">
                                    <div class="flex items-start justify-between">
                                        <div class="flex-1">
                                            <div class="flex items-center gap-3 mb-3">
                                                <div class="text-3xl">üå±</div>
                                                <h4 class="text-xl font-bold text-white group-hover:text-green-300 transition-colors">Urban Farm Network</h4>
                                                <span class="px-3 py-1 rounded-full text-xs font-semibold bg-yellow-500/20 text-yellow-300 border border-yellow-500/30">DRAFT</span>
                                            </div>
                                            <p class="text-gray-300 mb-4">Connecting urban farmers with local communities for sustainable food production and distribution.</p>
                                            <div class="flex items-center gap-4 text-sm">
                                                <span class="tag">üåø AgriTech</span>
                                                <span class="text-gray-400">üë• 7 interested cofounders</span>
                                                <span class="text-blue-400">üí∞ $5.1M market potential</span>
                                            </div>
                                        </div>
                                        <div class="flex gap-2">
                                            <button class="w-10 h-10 rounded-lg bg-green-500/20 text-green-300 border border-green-500/30 hover:bg-green-500/30 transition-all">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="w-10 h-10 rounded-lg bg-orange-500/20 text-orange-300 border border-orange-500/30 hover:bg-orange-500/30 transition-all">
                                                <i class="fas fa-rocket"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="feature-card-enhanced group">
                                    <div class="flex items-start justify-between">
                                        <div class="flex-1">
                                            <div class="flex items-center gap-3 mb-3">
                                                <div class="text-3xl">üé®</div>
                                                <h4 class="text-xl font-bold text-white group-hover:text-pink-300 transition-colors">Creator Economy Platform</h4>
                                                <span class="px-3 py-1 rounded-full text-xs font-semibold bg-blue-500/20 text-blue-300 border border-blue-500/30">BUILDING</span>
                                            </div>
                                            <p class="text-gray-300 mb-4">Empowering digital creators with tools for monetization, audience building, and brand partnerships.</p>
                                            <div class="flex items-center gap-4 text-sm">
                                                <span class="tag">üì± SocialTech</span>
                                                <span class="text-gray-400">üë• 12 interested cofounders</span>
                                                <span class="text-purple-400">üí∞ $8.7M market potential</span>
                                            </div>
                                        </div>
                                        <div class="flex gap-2">
                                            <button class="w-10 h-10 rounded-lg bg-pink-500/20 text-pink-300 border border-pink-500/30 hover:bg-pink-500/30 transition-all">
                                                <i class="fas fa-users"></i>
                                            </button>
                                            <button class="w-10 h-10 rounded-lg bg-indigo-500/20 text-indigo-300 border border-indigo-500/30 hover:bg-indigo-500/30 transition-all">
                                                <i class="fas fa-chart-line"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Dynamic Ideas will be inserted here -->
                                <div id="ideasDynamic" class="space-y-6"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Sidebar -->
                    <div class="space-y-8">
                        <!-- Quick Actions -->
                        <div class="glass-morphism-enhanced rounded-3xl p-8">
                            <h3 class="text-2xl font-bold mb-6 animated-gradient-text-enhanced">
                                ‚ö° Quick Launch
                            </h3>
                            <div class="space-y-4">
                                <a href="/cofounder" class="block p-4 rounded-xl bg-purple-500/10 border border-purple-500/20 hover:bg-purple-500/20 transition-all group">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center gap-3">
                                            <div class="text-2xl">ü§ù</div>
                                            <div>
                                                <div class="font-semibold group-hover:text-purple-300 transition-colors">Find Cofounders</div>
                                                <div class="text-xs text-gray-400">23 perfect matches waiting</div>
                                            </div>
                                        </div>
                                        <i class="fas fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                                    </div>
                                </a>
                                
                                <a href="/roadmap" class="block p-4 rounded-xl bg-blue-500/10 border border-blue-500/20 hover:bg-blue-500/20 transition-all group">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center gap-3">
                                            <div class="text-2xl">üó∫Ô∏è</div>
                                            <div>
                                                <div class="font-semibold group-hover:text-blue-300 transition-colors">View Roadmaps</div>
                                                <div class="text-xs text-gray-400">3 active roadmaps</div>
                                            </div>
                                        </div>
                                        <i class="fas fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                                    </div>
                                </a>
                                
                                <a href="/mentorship" class="block p-4 rounded-xl bg-yellow-500/10 border border-yellow-500/20 hover:bg-yellow-500/20 transition-all group">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center gap-3">
                                            <div class="text-2xl">üéÜ</div>
                                            <div>
                                                <div class="font-semibold group-hover:text-yellow-300 transition-colors">Meet Mentors</div>
                                                <div class="text-xs text-gray-400">5 mentors available</div>
                                            </div>
                                        </div>
                                        <i class="fas fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                                    </div>
                                </a>
                                
                                <a href="/events" class="block p-4 rounded-xl bg-green-500/10 border border-green-500/20 hover:bg-green-500/20 transition-all group">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center gap-3">
                                            <div class="text-2xl">üéâ</div>
                                            <div>
                                                <div class="font-semibold group-hover:text-green-300 transition-colors">Join Events</div>
                                                <div class="text-xs text-gray-400">2 events this week</div>
                                            </div>
                                        </div>
                                        <i class="fas fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                                    </div>
                                </a>
                            </div>
                        </div>

                        <!-- Achievement Section -->
                        <div class="glass-morphism-enhanced rounded-3xl p-8">
                            <h3 class="text-2xl font-bold mb-6 animated-gradient-text-enhanced">
                                üèÜ Achievements
                            </h3>
                            <div class="space-y-4">
                                <div class="flex items-center gap-3 p-3 rounded-xl bg-green-500/10 border border-green-500/20">
                                    <div class="text-2xl">üöÄ</div>
                                    <div>
                                        <div class="font-semibold text-sm text-green-300">First Idea Published</div>
                                        <div class="text-xs text-gray-400">Unlocked 2 days ago</div>
                                    </div>
                                </div>
                                <div class="flex items-center gap-3 p-3 rounded-xl bg-purple-500/10 border border-purple-500/20">
                                    <div class="text-2xl">ü§ù</div>
                                    <div>
                                        <div class="font-semibold text-sm text-purple-300">Cofounder Connected</div>
                                        <div class="text-xs text-gray-400">Unlocked 1 week ago</div>
                                    </div>
                                </div>
                                <div class="flex items-center gap-3 p-3 rounded-xl bg-gray-500/10 border border-gray-500/20 opacity-50">
                                    <div class="text-2xl">üí∞</div>
                                    <div>
                                        <div class="font-semibold text-sm text-gray-400">First Funding</div>
                                        <div class="text-xs text-gray-500">Complete roadmap to unlock</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        // Animate dashboard elements
        document.addEventListener('DOMContentLoaded', function() {
            // Animate stat cards
            gsap.fromTo('.stat-card', {
                y: 30,
                opacity: 0,
                scale: 0.9
            }, {
                y: 0,
                opacity: 1,
                scale: 1,
                duration: 0.6,
                stagger: 0.1,
                ease: 'back.out(1.7)'
            });
            
            // Animate feature cards
            gsap.fromTo('.feature-card-enhanced', {
                y: 50,
                opacity: 0
            }, {
                y: 0,
                opacity: 1,
                duration: 0.8,
                stagger: 0.2,
                delay: 0.3,
                ease: 'power3.out'
            });
            
            // Animate sidebar cards
            gsap.fromTo('.glass-morphism-enhanced', {
                x: 50,
                opacity: 0
            }, {
                x: 0,
                opacity: 1,
                duration: 0.8,
                stagger: 0.1,
                delay: 0.5,
                ease: 'power3.out'
            });

            // Load saved ideas from backend
            (async function loadIdeas(){
                try {
                    const r = await fetch(`${window.location.origin}/ideas/`);
                    if(!r.ok) throw new Error('Failed to load ideas');
                    const ideas = await r.json();
                    if (!Array.isArray(ideas) || ideas.length === 0) return;

                    // Hide static samples
                    document.querySelectorAll('.static-sample').forEach(el => el.style.display = 'none');

                    const c = document.getElementById('ideasDynamic');
                    c.innerHTML = ideas.map(item => {
                        const ri = item.refined_idea || {};
                        const mp = item.market_profile || {};
                        const score = typeof item.overall_confidence_score === 'number' ? item.overall_confidence_score.toFixed(1) : 'N/A';
                        return `
                        <div class="feature-card-enhanced group">
                            <div class="flex items-start justify-between">
                                <div class="flex-1">
                                    <div class="flex items-center gap-3 mb-3">
                                        <div class="text-3xl">üí°</div>
                                        <h4 class="text-xl font-bold text-white group-hover:text-purple-300 transition-colors">${ri.idea_title || 'Untitled Idea'}</h4>
                                        <span class="px-3 py-1 rounded-full text-xs font-semibold bg-green-500/20 text-green-300 border border-green-500/30">Score: ${score}</span>
                                    </div>
                                    <p class="text-gray-300 mb-4">${ri.solution_concept || ''}</p>
                                    <div class="flex items-center gap-4 text-sm">
                                        <span class="tag">${ri.core_domain ? 'üéØ ' + ri.core_domain : 'üéØ Idea'}</span>
                                        <span class="text-blue-400">üí∞ ${typeof mp.market_viability_score === 'number' ? mp.market_viability_score.toFixed(1) : 'N/A'} viability</span>
                                        ${typeof mp.raw_competitor_count === 'number' ? `<span class="text-gray-400">üè¢ ${mp.raw_competitor_count} competitors</span>` : ''}
                                    </div>
                                </div>
                                <div class="flex gap-2">
                                    <a href="/intake" class="w-10 h-10 rounded-lg bg-purple-500/20 text-purple-300 border border-purple-500/30 hover:bg-purple-500/30 transition-all flex items-center justify-center" title="Refine again">
                                        <i class="fas fa-edit"></i>
                                    </a>
                                </div>
                            </div>
                        </div>`;
                    }).join('');
                } catch(e) {
                    // Non-blocking; keep static content
                }
            })();
        });
    </script>

    <!-- Lightweight Developer Tools (non-intrusive) -->
    <div style="position: fixed; right: 16px; bottom: 16px; z-index: 9999;">
        <details style="background: rgba(0,0,0,0.6); border: 1px solid rgba(99,102,241,0.4); padding: 12px; border-radius: 12px; width: 340px;">
            <summary style="cursor: pointer; color: #c7d2fe; font-weight: 600;">Developer Tools</summary>
            <div style="margin-top: 10px; color: #e5e7eb; font-size: 14px;">
                <div style="margin-bottom: 8px; font-weight: 600;">Create Profile</div>
                <input id="dt-name" placeholder="Name" style="width:100%; margin-bottom:6px; padding:6px; border-radius:8px; background:#111827; border:1px solid #374151; color:#e5e7eb;" />
                <input id="dt-email" placeholder="Email" style="width:100%; margin-bottom:6px; padding:6px; border-radius:8px; background:#111827; border:1px solid #374151; color:#e5e7eb;" />
                <input id="dt-location" placeholder="Location (optional)" style="width:100%; margin-bottom:6px; padding:6px; border-radius:8px; background:#111827; border:1px solid #374151; color:#e5e7eb;" />
                <input id="dt-interest" placeholder="Interest (optional)" style="width:100%; margin-bottom:6px; padding:6px; border-radius:8px; background:#111827; border:1px solid #374151; color:#e5e7eb;" />
                <input id="dt-commitment" placeholder="Commitment (0-1, optional)" type="number" step="0.1" min="0" max="1" style="width:100%; margin-bottom:6px; padding:6px; border-radius:8px; background:#111827; border:1px solid #374151; color:#e5e7eb;" />
                <input id="dt-skills" placeholder="Skills (comma-separated)" style="width:100%; margin-bottom:8px; padding:6px; border-radius:8px; background:#111827; border:1px solid #374151; color:#e5e7eb;" />
                <button id="dt-create" style="width:100%; padding:8px; border-radius:8px; background:#4f46e5; color:white; font-weight:600;">Create Profile</button>
                <div id="dt-create-msg" style="margin-top:6px; font-size:12px; color:#a5b4fc;"></div>

                <hr style="border-color:#374151; margin:10px 0;" />

                <div style="display:flex; gap:8px; align-items:center;">
                    <button id="dt-load-users" style="flex:1; padding:8px; border-radius:8px; background:#10b981; color:white; font-weight:600;">Load Users</button>
                    <input id="dt-match-id" placeholder="User ID" style="width:110px; padding:6px; border-radius:8px; background:#111827; border:1px solid #374151; color:#e5e7eb;" />
                    <button id="dt-find-matches" style="padding:8px; border-radius:8px; background:#2563eb; color:white; font-weight:600;">Matches</button>
                </div>
                <div id="dt-results" style="margin-top:8px; max-height:180px; overflow:auto; font-size:12px; background:#0b1220; border:1px solid #1f2937; border-radius:8px; padding:8px;"></div>
            </div>
        </details>
    </div>

    <script>
        // Minimal wiring for matching API
        (function(){
            const base = window.location.origin;
            const el = (id) => document.getElementById(id);
            const msg = (t) => el('dt-results').innerHTML = t;

            el('dt-create')?.addEventListener('click', async () => {
                const skills = (el('dt-skills').value || '').split(',').map(s => s.trim()).filter(Boolean);
                const body = {
                    name: el('dt-name').value,
                    email: el('dt-email').value,
                    location: el('dt-location').value || null,
                    interest: el('dt-interest').value || null,
                    personality: null,
                    commitment_level: el('dt-commitment').value ? parseFloat(el('dt-commitment').value) : null,
                    skills: skills.length ? skills : null
                };
                el('dt-create').disabled = true;
                el('dt-create').textContent = 'Creating...';
                el('dt-create-msg').textContent = '';
                try {
                    const r = await fetch(`${base}/matching/users`, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(body) });
                    if(!r.ok){ const e = await r.json().catch(()=>({})); throw new Error(e.detail || 'Failed to create'); }
                    const data = await r.json();
                    el('dt-create-msg').textContent = `Created user ID: ${data.id}`;
                } catch(e){
                    el('dt-create-msg').textContent = `Error: ${e.message}`;
                } finally {
                    el('dt-create').disabled = false;
                    el('dt-create').textContent = 'Create Profile';
                }
            });

            el('dt-load-users')?.addEventListener('click', async () => {
                msg('Loading users...');
                try {
                    const r = await fetch(`${base}/matching/users`);
                    if(!r.ok) throw new Error('Failed to load users');
                    const users = await r.json();
                    msg(`<pre>${JSON.stringify(users, null, 2)}</pre>`);
                } catch(e){ msg(`Error: ${e.message}`); }
            });

            el('dt-find-matches')?.addEventListener('click', async () => {
                const id = (el('dt-match-id').value || '').trim();
                if(!id){ msg('Enter a user ID'); return; }
                msg('Finding matches...');
                try {
                    const r = await fetch(`${base}/matching/matches/${id}`);
                    if(!r.ok){ const e = await r.json().catch(()=>({})); throw new Error(e.detail || 'Failed'); }
                    const matches = await r.json();
                    msg(`<pre>${JSON.stringify(matches, null, 2)}</pre>`);
                } catch(e){ msg(`Error: ${e.message}`); }
            });
        })();
    </script>
    </body>
    </html>